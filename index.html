<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>D20 Ideen-Würfel</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --glow-color: #00ffff; --bg-dark: #0a0a0c; }
        body { margin: 0; background: var(--bg-dark); color: #fff; font-family: 'serif'; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }

        /* --- D20 Ikosaeder Styling --- */
        .scene { width: 200px; height: 200px; perspective: 1000px; margin-bottom: 50px; }
        #dice { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transform: rotateX(-20deg) rotateY(20deg); transition: transform 3s cubic-bezier(0.2, 0, 0.2, 1); }

        .face { position: absolute; width: 0; height: 0; border-left: 50px solid transparent; border-right: 50px solid transparent; border-bottom: 86.6px solid rgba(0, 150, 255, 0.4); transform-origin: 50% 100%; backface-visibility: visible; filter: drop-shadow(0 0 10px var(--glow-color)); border-bottom-color: rgba(0, 255, 255, 0.7); }
        
        /* Nummerierung zur Orientierung (optional sichtbar) */
        .face::after { content: ""; position: absolute; top: 30px; left: -10px; font-size: 12px; color: rgba(255,255,255,0.3); }

        /* --- Ergebnis-Anzeige (BG3 Style) --- */
        #result-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); background: rgba(0, 0, 0, 0.9); border: 2px solid var(--glow-color); box-shadow: 0 0 30px var(--glow-color); padding: 30px; border-radius: 15px; text-align: center; width: 85%; max-width: 400px; opacity: 0; transition: all 0.5s ease-out; z-index: 100; pointer-events: none; }
        #result-overlay.show { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: auto; }
        #result-text { font-size: 24px; font-weight: bold; color: #fff; text-shadow: 0 0 10px var(--glow-color); }

        /* --- Button --- */
        button { padding: 15px 50px; font-size: 20px; background: #1a1a1a; color: var(--glow-color); border: 2px solid var(--glow-color); border-radius: 5px; cursor: pointer; text-transform: uppercase; letter-spacing: 3px; box-shadow: 0 0 15px rgba(0, 255, 255, 0.3); transition: 0.3s; }
        button:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <div class="scene">
        <div id="dice"></div>
    </div>

    <div id="result-overlay" onclick="this.classList.remove('show')">
        <div style="color: var(--glow-color); font-size: 12px; margin-bottom: 10px;">DEINE AUFGABE:</div>
        <div id="result-text"></div>
        <div style="margin-top: 20px; font-size: 10px; color: #666;">Tippen zum Schliessen</div>
    </div>

    <button onclick="roll()">Würfeln</button>

    <script>
        const phrases = [
            "Ein Hörspiel hören", "Eine Sendung schauen", "Ein Buch oder Comic lesen", "Ein eigenes Bild malen",
            "Eine kurze Geschichte schreiben", "Ein Sachthema recherchieren", "Ein Brettspiel spielen", "Ein Rätsel lösen",
            "Kreidezeichnung malen", "Ein Puzzle lösen", "Ein Musikinstrument üben", "Ein Experiment durchführen",
            "Eigene Meinung aufschreiben", "Einen Spaziergang machen", "Ein Lied mitsingen", "Origami falten",
            "Ein Tagebuch schreiben", "Einen Snack zubereiten", "Ein Lern-Quiz machen", "Etwas aufräumen"
        ];

        const dice = document.getElementById('dice');
        const overlay = document.getElementById('result-overlay');
        const resultText = document.getElementById('result-text');

        // Erstelle 20 Flächen für den D20 (Ikosaeder-Mathematik vereinfacht)
        for (let i = 0; i < 20; i++) {
            const face = document.createElement('div');
            face.className = 'face';
            // Wir verteilen die Flächen grob in 3 Ringen
            const row = Math.floor(i / 5);
            const angleY = (i % 5) * 72;
            const angleX = row === 0 ? 30 : (row === 3 ? 150 : 90);
            const offset = (row % 2 === 0) ? 0 : 36;
            
            face.style.transform = `rotateY(${angleY + offset}deg) rotateX(${i * 18}deg) translateZ(85px)`;
            dice.appendChild(face);
        }

        function roll() {
            overlay.classList.remove('show');
            
            // Zufällige massive Rotation
            const x = Math.floor(Math.random() * 1000) + 1000;
            const y = Math.floor(Math.random() * 1000) + 1000;
            const z = Math.floor(Math.random() * 1000) + 1000;
            
            dice.style.transform = `rotateX(${x}deg) rotateY(${y}deg) rotateZ(${z}deg)`;

            // Ergebnis anzeigen wenn Animation stoppt
            setTimeout(() => {
                const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
                resultText.innerText = randomPhrase;
                overlay.classList.add('show');
            }, 3100);
        }

        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>
</body>
</html>
