<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>D20 Ideen-Würfel</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { margin: 0; background: #050505; color: #fff; font-family: 'Georgia', serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }

        /* --- D20 Geometrie --- */
        .scene { width: 200px; height: 200px; perspective: 800px; }
        #dice { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transform: rotateX(-20deg) rotateY(20deg); transition: transform 3s cubic-bezier(0.15, 0, 0.15, 1); }

        .face { 
            position: absolute; width: 0; height: 0; 
            border-left: 50px solid transparent; 
            border-right: 50px solid transparent; 
            border-bottom: 86.6px solid rgba(0, 180, 255, 0.5); 
            transform-origin: 50% 100%; 
            backface-visibility: visible; 
            filter: drop-shadow(0 0 8px #00ffff);
        }

        /* --- Ergebnis-Overlay (BG3 Style) --- */
        #overlay { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.5); 
            background: rgba(10, 10, 15, 0.95); border: 2px solid #00ffff; padding: 25px; 
            border-radius: 10px; text-align: center; width: 80%; opacity: 0; 
            transition: all 0.5s cubic-bezier(0.17, 0.89, 0.32, 1.28); z-index: 1000; pointer-events: none;
            box-shadow: 0 0 30px #00ffff;
        }
        #overlay.active { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: auto; }
        #overlay h2 { color: #00ffff; font-size: 14px; margin: 0 0 10px 0; letter-spacing: 2px; }
        #result-text { font-size: 22px; font-weight: bold; line-height: 1.4; }

        button { 
            margin-top: 50px; padding: 12px 40px; font-size: 18px; 
            background: transparent; color: #00ffff; border: 2px solid #00ffff; 
            cursor: pointer; text-transform: uppercase; letter-spacing: 2px;
            transition: 0.3s;
        }
        button:active { background: #00ffff; color: #000; }
    </style>
</head>
<body>

    <div class="scene">
        <div id="dice"></div>
    </div>

    <div id="overlay" onclick="this.classList.remove('active')">
        <h2>DEINE IDEE</h2>
        <div id="result-text"></div>
        <p style="font-size: 10px; color: #555; margin-top: 15px;">ZUM SCHLIESSEN TIPPEN</p>
    </div>

    <button onclick="roll()">Würfeln</button>

    <script>
        const phrases = [
            "Hörspiel hören", "Sendung schauen", "Buch/Comic lesen", "Bild malen",
            "Geschichte schreiben", "Thema recherchieren", "Brettspiel spielen", "Rätsel lösen",
            "Kreidezeichnung", "Puzzle lösen", "Instrument üben", "Experiment machen",
            "Meinung aufschreiben", "Spaziergang", "Lied mitsingen", "Origami falten",
            "Tagebuch schreiben", "Snack zubereiten", "Lern-Quiz", "Aufräumen"
        ];

        const dice = document.getElementById('dice');
        const overlay = document.getElementById('overlay');
        const resultText = document.getElementById('result-text');

        // Die 20 Flächen eines Ikosaeders (D20) mathematisch anordnen
        for (let i = 0; i < 20; i++) {
            const face = document.createElement('div');
            face.className = 'face';
            
            // Winkeleinteilung für 20 Flächen (5 oben, 10 mitte, 5 unten)
            let rx, ry;
            if (i < 5) { rx = 30; ry = i * 72; }
            else if (i < 15) { rx = 90; ry = (i - 5) * 36 + 18; }
            else { rx = 150; ry = (i - 15) * 72; }
            
            face.style.transform = `rotateY(${ry}deg) rotateX(${rx}deg) translateZ(75px)`;
            dice.appendChild(face);
        }

        function roll() {
            overlay.classList.remove('active');
            
            // Massive Zufallsrotation
            const rx = Math.floor(Math.random() * 2000) + 1000;
            const ry = Math.floor(Math.random() * 2000) + 1000;
            const rz = Math.floor(Math.random() * 1000);
            
            dice.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)`;

            // Ergebnis-Einblendung
            setTimeout(() => {
                resultText.innerText = phrases[Math.floor(Math.random() * phrases.length)];
                overlay.classList.add('active');
            }, 3100);
        }

        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>
</body>
</html>
