<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Magische Karten (Pop-Art)</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
    <style>
        :root {
            --pop-red: #e60000;
            --pop-yellow: #ffd700;
            --pop-blue: #0000ff;
            --pop-black: #000000;
            /* Neue Hintergrundfarben */
            --bg-dark-blue: #0a0a45;
            --dot-light-blue: #4da6ff;
            --dot-white: #ffffff;
            --dot-pink: #ff66b3;
            --dot-purple: #9933ff;
        }

        body {
            margin: 0;
            /* Dunkelblauer Hintergrund */
            background-color: var(--bg-dark-blue);
            /* Buntes, grosses Rastermuster mittels SVG */
            background-image: url('data:image/svg+xml;utf8,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="9" fill="%234da6ff"/><circle cx="45" cy="15" r="9" fill="%23ffffff"/><circle cx="15" cy="45" r="9" fill="%23ff66b3"/><circle cx="45" cy="45" r="9" fill="%239933ff"/></svg>');
            background-size: 60px 60px; /* Grösse des Musters */
            color: var(--pop-black);
            font-family: 'Arial Black', 'Impact', sans-serif; /* Besser lesbare Comic-Schrift */
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden;
        }

        .deck { 
            position: relative; 
            width: 240px; 
            height: 340px; 
            perspective: 1200px; 
        }

        .card-container {
            position: absolute; width: 100%; height: 100%;
            transform-style: preserve-3d; transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .card {
            position: absolute; width: 100%; height: 100%; 
            border-radius: 15px;
            backface-visibility: hidden; display: flex; flex-direction: column;
            align-items: center; justify-content: center; padding: 20px;
            text-align: center; box-sizing: border-box; 
            border: 5px solid var(--pop-black);
            box-shadow: 7px 7px 0px var(--pop-black);
            background-color: #fff;
        }

        /* Rückseite: Klassisches blaues Raster */
        .card-back {
            background-color: var(--pop-blue);
            background-image: 
                radial-gradient(var(--pop-black) 20%, transparent 21%);
            background-size: 15px 15px;
            z-index: 2;
        }
        
        .card-back::after {
            content: '★';
            font-size: 80px;
            color: var(--pop-yellow);
            -webkit-text-stroke: 3px var(--pop-black);
            text-shadow: 3px 3px 0 var(--pop-black);
        }

        /* Vorderseite: Bessere Lesbarkeit */
        .card-front {
            /* Rote Rasterpunkte etwas dezenter für besseren Kontrast */
            background-image: radial-gradient(rgba(230, 0, 0, 0.3) 15%, transparent 16%);
            background-size: 10px 10px;
            color: #fff; /* Weisse Schrift innen */
            transform: rotateY(180deg); 
            z-index: 1;
            font-size: 28px; /* Etwas kleiner für mehr Platz */
            line-height: 1.2;
            text-transform: uppercase;
            /* Dicker schwarzer Rand um die Schrift für Comic-Look & Lesbarkeit */
            -webkit-text-stroke: 2px var(--pop-black);
            text-shadow: 3px 3px 0 var(--pop-black);
        }

        .text-content {
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 95%;
            padding: 0 5px;
        }

        .suit { 
            position: absolute; 
            font-size: 40px; 
            color: var(--pop-red);
            -webkit-text-stroke: 2px var(--pop-black);
            text-shadow: 2px 2px 0 var(--pop-black);
        }
        .top-left { top: 15px; left: 15px; }
        .bottom-right { bottom: 15px; right: 15px; transform: rotate(180deg); }

        .shuffle { animation: shuffle-move 0.4s ease-in-out infinite; }
        @keyframes shuffle-move { 
            0%, 100% { transform: translateX(0); } 
            50% { transform: translateX(120px) rotate(10deg); } 
        }

        .drawn {
            transform: scale(1.1) translateY(-30px) rotateY(180deg) !important;
            z-index: 1000 !important; 
            box-shadow: 15px 15px 0px rgba(0,0,0,0.3) !important;
        }

        button {
            margin-top: 60px; padding: 15px 40px; 
            background-color: var(--pop-yellow);
            color: var(--pop-black); 
            border: 4px solid var(--pop-black); 
            /* Button behält die 'Bangers' Schrift */
            font-family: 'Bangers', cursive;
            font-size: 26px; 
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            transition: 0.1s;
            box-shadow: 5px 5px 0px var(--pop-black);
        }
        button:active { 
            transform: translate(3px, 3px); 
            box-shadow: 2px 2px 0px var(--pop-black);
        }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>

    <div class="deck" id="deck"></div>
    <button id="actionBtn" onclick="drawCard()">Mischen & Ziehen</button>

    <script>
        const phrases = [
            "Hörspiel hören", "Checkersendung schauen", "Comic lesen", "Spannendes Buch lesen",
            "Rätsel lösen", "Quiz spielen", "Lego bauen", "Fantasiegeschichte erfinden",
            "Zeichnen oder malen", "Basteln mit Recyclingmaterial", "Origami falten", "Modell bauen",
            "Puzzle lösen", "Kartentrick zeigen", "Geschicklichkeitsspiel spielen", "Jonglieren üben",
            "Musik hören", "Instrument spielen", "Lied vorsingen", "Foto machen",
            "Kurzes Video drehen", "Draussen spielen", "Park oder Wald erkunden", "Tiere beobachten",
            "Pflanzen bestimmen", "Schatzsuche organisieren", "Abfall sammeln", "Müll trennen",
            "Einer Freundin anrufen", "Beim Nachbarn klingeln", "Kleinen Vortrag halten", "Etwas erklären",
            "Mini-Interview führen", "Tagebuch schreiben", "Eigene Idee umsetzen", "Kleines Projekt starten"
        ];

        const suits = ["♥", "♦", "♣", "♠"];

        const deck = document.getElementById('deck');
        const btn = document.getElementById('actionBtn');

        function playMagicSound() {
            try {
                const context = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = context.createOscillator();
                const gain = context.createGain();
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(330, context.currentTime); 
                oscillator.frequency.exponentialRampToValueAtTime(440, context.currentTime + 0.2); 
                gain.gain.setValueAtTime(0.1, context.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.6);
                oscillator.connect(gain);
                gain.connect(context.destination);
                oscillator.start();
                oscillator.stop(context.currentTime + 0.6);
            } catch (e) { console.error("Audio-Fehler"); }
        }

        function createDeck() {
            if (!deck) return;
            deck.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                const container = document.createElement('div');
                container.className = 'card-container';
                container.style.transform = `translateZ(${-i * 4}px) rotate(${Math.random() * 4 - 2}deg)`;
                container.innerHTML = `<div class="card card-back"></div><div class="card card-front"></div>`;
                deck.appendChild(container);
            }
        }

        function drawCard() {
            if (btn.disabled) return;
            btn.disabled = true;
            createDeck();
            const cards = document.querySelectorAll('.card-container');
            cards.forEach((c, idx) => setTimeout(() => c.classList.add('shuffle'), idx * 50));

            setTimeout(() => {
                cards.forEach(c => c.classList.remove('shuffle'));
                playMagicSound();
                const selected = cards[Math.floor(Math.random() * cards.length)];
                const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
                const randomSuit = suits[Math.floor(Math.random() * suits.length)];
                const front = selected.querySelector('.card-front');
                
                front.innerHTML = `
                    <div class="suit top-left">${randomSuit}</div>
                    <div class="text-content">${randomPhrase}</div>
                    <div class="suit bottom-right">${randomSuit}</div>
                `;
                selected.classList.add('drawn');
                btn.disabled = false;
            }, 1500);
        }

        window.onload = () => {
            createDeck();
        };
    </script>
</body>
</html>
